# ğŸ¯ Processed Data - Ready for ML

This folder contains **cleaned and preprocessed** Premier League match data, optimized for machine learning models.

---

## ğŸ“ Files Overview

### ğŸ“¦ `processed_premier_league_combined.csv`
**Complete processed dataset ready for modeling**

This file contains **both original and encoded columns** for maximum flexibility:

**ğŸ”¤ Original Columns** (for display and interpretation):
- ğŸ† **Season** - Season identifier (e.g., "2023-24")
- ğŸ“… **Date** - Match date (YYYY-MM-DD)
- ğŸ  **HomeTeam** - Home team name (e.g., "Arsenal", "Liverpool")
- âœˆï¸ **AwayTeam** - Away team name
- ğŸ **FTR** - Full Time Result (H/D/A)

**ğŸ”¢ Encoded Columns** (for model training):
- **Season_encoded** - Numeric season encoding
- **HomeTeam_le** - Label-encoded home team (0 to ~50)
- **AwayTeam_le** - Label-encoded away team (0 to ~50)
- **FTR_encoded** - Target variable (0=Away, 1=Draw, 2=Home)

**ğŸ“Š Match Statistics** (raw values, ready for trees):
- Goals: FTHG, FTAG
- Shots: HS, AS, HST, AST
- Fouls: HF, AF
- Corners: HC, AC
- Cards: HY, AY, HR, AR

**ğŸ“ Shape**: ~10,000+ rows Ã— 25-30 columns

ğŸ’¡ **Why both?** Original columns let you display team names and interpret results. Encoded columns are used for training machine learning models.

---

## ğŸ“‹ Field Descriptions

### ğŸ”¤ Original Columns (Preserved for Reference)

#### ğŸ†” Match Identifiers
- **Season** - ğŸ† Season identifier (e.g., "2023-24")
- **Date** - ğŸ“… Match date in YYYY-MM-DD format

#### ğŸ‘¥ Team Names
- **HomeTeam** - ğŸ  Home team name (e.g., "Arsenal", "Chelsea", "Liverpool")
- **AwayTeam** - âœˆï¸ Away team name

#### ğŸ¯ Match Outcome
- **FTR** - ğŸ Full Time Result
  - `H` = ğŸ”´ Home win
  - `D` = ğŸ¤ Draw
  - `A` = ğŸ”µ Away win

---

### ğŸ”¢ Encoded Columns (For Model Training)

#### ğŸ“Š Encoded Identifiers
- **Season_encoded** - Numeric encoding of seasons (0 to n, ordered chronologically)

#### ğŸ¤– Encoded Teams
- **HomeTeam_le** - ğŸ  Home team label-encoded (0 to ~50)
- **AwayTeam_le** - âœˆï¸ Away team label-encoded (0 to ~50)

ğŸ’¡ *Mapping: Use the original HomeTeam/AwayTeam columns to see which number corresponds to which team*

#### ğŸ¯ Encoded Target
- **FTR_encoded** - Full Time Result encoded for ML models
  - `0` = ğŸ”µ Away team wins
  - `1` = ğŸ¤ Draw
  - `2` = ğŸ”´ Home team wins

---

### âš½ Match Statistics (Raw Values)
- **FTHG** - Full Time Home Goals
- **FTAG** - Full Time Away Goals

### ğŸ¯ Match Statistics - Shots
- **HS** - Home Shots
- **AS** - Away Shots
- **HST** - ğŸ”¥ Home Shots on Target
- **AST** - ğŸ”¥ Away Shots on Target

### âš ï¸ Match Statistics - Fouls
- **HF** - Home Fouls Committed
- **AF** - Away Fouls Committed

### ğŸš© Match Statistics - Corners
- **HC** - Home Corners
- **AC** - Away Corners

### ğŸ“‡ Match Statistics - Cards
- **HY** - ğŸŸ¡ Home Yellow Cards
- **AY** - ğŸŸ¡ Away Yellow Cards
- **HR** - ğŸŸ¥ Home Red Cards
- **AR** - ğŸŸ¥ Away Red Cards

### ğŸ—‘ï¸ Removed Columns
The following columns from the raw data were removed during preprocessing:
- **HTHG, HTAG, HTR** - â±ï¸ Half-time statistics (not needed for full-time prediction)
- **Referee** - ğŸ‘¨â€âš–ï¸ Referee name (high cardinality, minimal predictive value)
- **SourceFile** - ğŸ“ Data provenance metadata (not needed for modeling)

---

---

## ğŸ”§ Data Preprocessing Steps

These files were generated by `notebooks/data_preparation.ipynb` with the following steps:

1. **ğŸ“¥ Load raw data** from `data/raw/combined/premier_league_combined.csv`
2. **ğŸ” Filter complete seasons** - Removed seasons with missing performance statistics (pre-2000 seasons)
3. **âœ… Data quality checks** - Verified no missing values in key columns
4. **ğŸ—‘ï¸ Remove unused columns** - Dropped half-time stats (HTHG, HTAG, HTR), Referee, and SourceFile
5. **ğŸ”¢ Encode categorical variables**:
   - FTR (target) â†’ `FTR_encoded` (0=Away, 1=Draw, 2=Home)
   - Season â†’ `Season_encoded` (ordinal encoding)
   - Teams â†’ `HomeTeam_le`, `AwayTeam_le` (label encoding for tree models)
6. **ğŸ“Š Standardization** - Skipped for tree-based models (configured via `MODEL_FAMILY='tree'`)

---

## âš™ï¸ Model Configuration

The preprocessing was optimized for **ğŸŒ² decision tree-based models** (DecisionTree, RandomForest, GradientBoosting):
- **ğŸ”¢ Encoding**: Label encoding for teams (avoids 90+ one-hot columns)
- **ğŸ“ Scaling**: None (trees are scale-invariant)
- **ğŸ“Š Features**: Raw match statistics preserved

To use with **ğŸ“ˆ linear models** (LogisticRegression, SVM), re-run preprocessing with `MODEL_FAMILY='linear'` to enable:
- âœ… One-hot encoding for teams
- âœ… Z-score standardization for numeric features

---

## ğŸ’» Usage

```python
import pandas as pd

# Load the processed dataset
df = pd.read_csv('data/processed/processed_premier_league_combined.csv')

# Use encoded columns for modeling
X = df[['Season_encoded', 'HomeTeam_le', 'AwayTeam_le', 
        'FTHG', 'FTAG', 'HS', 'AS', 'HST', 'AST', 
        'HF', 'AF', 'HC', 'AC', 'HY', 'AY', 'HR', 'AR']]
y = df['FTR_encoded']

# Use original columns for display/interpretation
print(f"Match: {df['HomeTeam'][0]} vs {df['AwayTeam'][0]}")
print(f"Result: {df['FTR'][0]}")
```

---

## ğŸ“Š Data Characteristics

- **ğŸ“… Time range**: Seasons 2000-01 through 2024-25 (complete seasons only)
- **âš½ Matches**: ~10,000+ Premier League matches
- **ğŸ¯ Target distribution**: 
  - ğŸ”´ Home wins (~46%)
  - ğŸ¤ Draws (~26%)
  - ğŸ”µ Away wins (~28%)
- **âœ… No missing values**: All rows have complete data
- **ğŸ”’ Pre-match features only**: No data leakage from match outcomes

---

## ğŸš€ Next Steps

Use this file for:
1. **âœ‚ï¸ Train/test splitting** - Split by season (older seasons for training, recent for testing)
2. **ğŸ¤– Model training** - Decision trees, Random Forest, or other algorithms
3. **ğŸ† Standings prediction** - Predict match outcomes to simulate league standings

---

## ğŸ’¡ Important Notes

- **âœ… Both original and encoded columns included**: Use encoded for training, original for interpretation
- **ğŸ“… Date column preserved**: Use for temporal analysis and season-aware splits
- **ğŸ”„ Easy reverse mapping**: Match encoded IDs back to team names using the original columns in the same row
- **ğŸš« No feature engineering applied**: Goal differences, rolling averages, etc. were intentionally excluded to avoid data leakage for pre-match prediction
- **ğŸ¯ Train/test split**: Do this in your modeling notebook, not here

---

## ğŸ“š More Information

For details on preprocessing logic and to regenerate this file, see `notebooks/data_preparation.ipynb`.
